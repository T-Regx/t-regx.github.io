<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="T-Regx Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="T-Regx Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="T-Regx" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Announcement - Prepared patterns revamp | T-Regx</title><meta data-react-helmet="true" property="og:title" content="Announcement - Prepared patterns revamp | T-Regx"><meta data-react-helmet="true" name="description" content="Rawwrrrr!"><meta data-react-helmet="true" property="og:description" content="Rawwrrrr!"><meta data-react-helmet="true" property="og:url" content="https://t-regx.com/blog/2021/07/10/revamp-announcement"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://t-regx.com/img/t.regx.png"><meta data-react-helmet="true" name="twitter:image" content="https://t-regx.com/img/t.regx.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://t-regx.com/blog/2021/07/10/revamp-announcement"><link data-react-helmet="true" rel="alternate" href="https://t-regx.com/blog/2021/07/10/revamp-announcement" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://t-regx.com/blog/2021/07/10/revamp-announcement" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.099beaf8.css">
<link rel="preload" href="/assets/js/runtime~main.d6ec1de5.js" as="script">
<link rel="preload" href="/assets/js/main.afe1c039.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/t.regx.borderless.png" alt="T-Regx" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/t.regx.borderless.png" alt="T-Regx" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">T-Regx</strong></a><a class="navbar__item navbar__link" href="/docs/overview">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/comparison">Compare</a><a class="navbar__item navbar__link" href="/help">Help</a><a class="navbar__item navbar__link" href="/replit">Try online</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/T-Regx/T-Regx/blob/develop/ChangeLog.md" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ChangeLog</a><a href="https://github.com/T-Regx/T-Regx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/t.regx.borderless.png" alt="T-Regx" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/t.regx.borderless.png" alt="T-Regx" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">T-Regx</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/overview">Tutorial</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/comparison">Compare</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Help</a></li><li class="menu__list-item"><a class="menu__link" href="/replit">Try online</a></li><li class="menu__list-item"><a href="https://github.com/T-Regx/T-Regx/blob/develop/ChangeLog.md" target="_blank" rel="noopener noreferrer" class="menu__link">ChangeLog</a></li><li class="menu__list-item"><a href="https://github.com/T-Regx/T-Regx" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--md"><div class="row"><div class="col col--8 col--offset-2"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_d4p0"><a href="/blog/2021/07/10/revamp-announcement">Announcement - Prepared patterns revamp</a></h2><div class="margin-vert--md"><time datetime="2021-07-10T00:00:00.000Z" class="blogPostDate_iEnO">July 10, 2021 Â· 3 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a>Daniel Wilkowski</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>Rawwrrrr!</p><p>Hello, dear regexp writers! For about 5 months now, we&#x27;ve been working really hard or
rewriting prepared patterns, in order to introduce certain necessary features to them.</p><p>The biggest issue, of prepared patterns in their current form, is that the only form
of ignoring a placeholder in a pattern was escape.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI php"><div tabindex="0" class="prism-code language-php codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:rgb(191, 199, 213);background-color:rgb(41, 45, 62)"><div class="token-line" style="color:rgb(191, 199, 213)"><span class="token plain">Pattern::inject(&#x27;foo:@&#x27;, [&#x27;bar&#x27;]); // includes value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI php"><div tabindex="0" class="prism-code language-php codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:rgb(191, 199, 213);background-color:rgb(41, 45, 62)"><div class="token-line" style="color:rgb(191, 199, 213)"><span class="token plain">Pattern::inject(&#x27;foo:\@&#x27;, []); // doesn&#x27;t include value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Of course, you could also escape the slash, so <code>foo:\\@</code> would include the value, <code>foo:\\\@</code>
wouldn&#x27;t, and so on.</p><p>The that&#x27;s fine, but it&#x27;s not everything. There are other cases whether placeholders needed
special treatments, most notably <code>[@]</code>, <code>\Q@\E</code>, <code>(?#@)</code> and <code>#@\n</code> (with <code>x</code> flag).
We knew about those cases, and we made sure, that while the placeholder would be used in those
cases, they wouldn&#x27;t break the pattern and wouldn&#x27;t introduce any unexpected behaviour.</p><p>So in other words, as long as the users used the library according to the documentation, every
thing would be fine and every feature would be usable as usual.</p><p>The problem appears, what if user uses the library not in accordance to the documentation?
Well, the best case would be to throw an exception, where users&#x27; actions were invalid, or
perform them if they were. Sadly, it turns out that with the current implementation that appeared
to be impossible. And there&#x27;s also another case, where user can use in-pattern structures to
enable or disable <code>x</code> flag, turning a certain pattern into a comment, or turn a comment off.
In that, handling the placeholder properly turned out to be virtually impossible, not for the
corner cases but for the standard cases as well.  So we decided to spend months, to rewrite the
prepared patterns internals, allowing us to handle the pattern building process much better.</p><p>The changes haven&#x27;t been released yet, but they will be soon. Here are the changes:</p><ul><li>Currently, <code>\@</code> would be left untouched. This behaviour is unchanged.</li><li>Currently, <code>[@]</code>, <code>\Q@\E</code>, <code>\c@</code> would be injected. These values won&#x27;t be injected now.</li><li>Currently, placeholder <code>@</code> in comment would be injected. From now on, it won&#x27;t, regardless of
flags used in the main pattern, or in any of the subpatterns.</li></ul><p>So in short, in the current version, <code>@</code> placeholder was replaced everytime, unless escaped.</p><p>In this the next release, <code>@</code> will be replaced only if that&#x27;s a literal in a pattern. So, if
<code>@</code> is a part of a character-class (<code>[@]</code>), is quoted (<code>\Q@\E</code>), is escaped <code>\@</code>, is in a comment
(<code>(?#@)</code>), or is in an extended comment (<code>#@\n</code>, when <code>x</code> flag is used), then it won&#x27;t be injected,
or any other case to come, it won&#x27;t be injected.</p></div></article><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/11/10/gitter"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« T-Regx on Gitter</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/07/10/simplification-of-prepared-patterns"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Announcement - Prepared patterns simplification Â»</div></a></div></nav></div></div></div><div id="disqus_thread"></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction-preg">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/match">Documentation</a></li><li class="footer__item"><a href="https://github.com/T-Regx/T-Regx/blob/develop/ChangeLog.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/T-Regx/T-Regx" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="github-button" href="https://github.com/T-Regx/T-Regx" title="See this project on GitHub" data-icon="octicon-star" data-show-count="true" data-count-href="/T-Regx/T-Regx/stargazers" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">T-Regx</a></li><li class="footer__item"><a href="https://github.com/sponsors/Danon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsor</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/t.regx.png" alt="T-Regx" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/t.regx.png" alt="T-Regx" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright Â© 2017-2022 Daniel Wilkowski</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d6ec1de5.js"></script>
<script src="/assets/js/main.afe1c039.js"></script>
</body>
</html>