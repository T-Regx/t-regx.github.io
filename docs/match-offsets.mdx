---
id: match-offsets
title: Match offsets
---

import {CodeTabs, Result} from './code';

There are several ways to read offsets of your matched occurrences and your capturing groups.

## Using [`Detail`]

If you use [`Detail`] object (like the one passed to [`forEach()`] or [`map()`] callback) you can just use
[`offset()`] method.

<CodeTabs
    tregx={`$detail = pattern('\\d+')->match('I was born in 1996')->first();
return 'Match was found at ' . $detail->offset();`}
    php={`preg::match_all('/\\d+/', 'I was born in 1996', $match, PREG_OFFSET_CAPTURE);
return 'Match was found at ' . $match[0][0][1];`}/>

<Result>'Match was found at 14'</Result>

:::note
Method [`offset()`] is UTF-8 safe and returns offsets in characters, not bytes.
For bytes, consider using [`byteOffset()`] method.
:::
:::note
Use [`offset()`] with multibyte-safe methods like [`mb_substr()`], and [`byteOffset()`] with methods like [`substr()`].
:::

### Using [`Detail`]

<CodeTabs
    tregx={`$detail = pattern('(?<capital>[A-Z])[a-z]+')->match('my name is John Cena')->first();
return $detail->group('capital')->offset();`}
    php={`if (preg::match('/(?<capital>[A-Z])[a-z]+/', 'my name is John Cena', $match, PREG_OFFSET_CAPTURE)) {\n
    if (array_key_exists('capital', $match)) {
        if ($match['capital'][1] === -1) {
            throw new GroupNotMatchedException('capital');
        }
        return $match['capital'][1];
    }\n
    // preg_match() trims trailing empty elements, so additional checks are needed
    // if there's no group key - the group is either un-matched or non-existent
    if (validateGroupExists('capital', $match)) {
        throw new GroupNotMatchedException('capital');
    }
    throw new NonexistentGroupException('capital');
}
throw new SubjectNotMatchedException();`}/>

<Result>11</Result>

<!-- The PHP snippets for both upper and lower T-Regx snippets are identical -->

[`mb_substr()`]: https://www.php.net/manual/en/function.mb-substr.php
[`substr()`]: https://www.php.net/manual/en/function.substr.php
[`Detail`]: match-details.md
[`Detail.group()`]: match-groups.md#group-details
[`offset()`]: match-details.md#offsets
[`byteOffset()`]: match-details.md#offsets
[`first()`]: match-first.mdx
[`forEach()`]: match-for-each.mdx
[`map()`]: match-map.mdx
